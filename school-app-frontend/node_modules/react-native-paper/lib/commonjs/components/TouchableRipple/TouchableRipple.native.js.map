{"version":3,"names":["ANDROID_VERSION_LOLLIPOP","ANDROID_VERSION_PIE","TouchableRipple","style","background","borderless","disabled","disabledProp","rippleColor","underlayColor","children","theme","rest","showUnderlay","setShowUnderlay","React","useState","onPress","calculatedRippleColor","calculatedUnderlayColor","getTouchableRippleColors","useForeground","Platform","OS","Version","handlePressIn","e","onPressIn","handlePressOut","onPressOut","supported","styles","overflowHidden","color","foreground","Children","only","backgroundColor","StyleSheet","create","overflow","withInternalTheme"],"sources":["TouchableRipple.native.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  PressableAndroidRippleConfig,\n  StyleProp,\n  Platform,\n  ViewStyle,\n  StyleSheet,\n  Pressable,\n  GestureResponderEvent,\n} from 'react-native';\n\nimport { withInternalTheme } from '../../core/theming';\nimport type { InternalTheme } from '../../types';\nimport { getTouchableRippleColors } from './utils';\n\nconst ANDROID_VERSION_LOLLIPOP = 21;\nconst ANDROID_VERSION_PIE = 28;\n\ntype Props = React.ComponentProps<typeof Pressable> & {\n  borderless?: boolean;\n  background?: PressableAndroidRippleConfig;\n  disabled?: boolean;\n  onPress?: () => void | null;\n  rippleColor?: string;\n  underlayColor?: string;\n  children: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n  theme: InternalTheme;\n};\n\nconst TouchableRipple = ({\n  style,\n  background,\n  borderless = false,\n  disabled: disabledProp,\n  rippleColor,\n  underlayColor,\n  children,\n  theme,\n  ...rest\n}: Props) => {\n  const [showUnderlay, setShowUnderlay] = React.useState<boolean>(false);\n\n  const disabled = disabledProp || !rest.onPress;\n  const { calculatedRippleColor, calculatedUnderlayColor } =\n    getTouchableRippleColors({\n      theme,\n      rippleColor,\n      underlayColor,\n    });\n\n  // A workaround for ripple on Android P is to use useForeground + overflow: 'hidden'\n  // https://github.com/facebook/react-native/issues/6480\n  const useForeground =\n    Platform.OS === 'android' &&\n    Platform.Version >= ANDROID_VERSION_PIE &&\n    borderless;\n\n  const handlePressIn = (e: GestureResponderEvent) => {\n    setShowUnderlay(true);\n    rest.onPressIn?.(e);\n  };\n\n  const handlePressOut = (e: GestureResponderEvent) => {\n    setShowUnderlay(false);\n    rest.onPressOut?.(e);\n  };\n\n  if (TouchableRipple.supported) {\n    return (\n      <Pressable\n        {...rest}\n        disabled={disabled}\n        style={[borderless && styles.overflowHidden, style]}\n        android_ripple={\n          background != null\n            ? background\n            : {\n                color: calculatedRippleColor,\n                borderless,\n                foreground: useForeground,\n              }\n        }\n      >\n        {React.Children.only(children)}\n      </Pressable>\n    );\n  }\n\n  return (\n    <Pressable\n      {...rest}\n      disabled={disabled}\n      style={[\n        borderless && styles.overflowHidden,\n        showUnderlay && { backgroundColor: calculatedUnderlayColor },\n        style,\n      ]}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n    >\n      {React.Children.only(children)}\n    </Pressable>\n  );\n};\n\nTouchableRipple.supported =\n  Platform.OS === 'android' && Platform.Version >= ANDROID_VERSION_LOLLIPOP;\n\nconst styles = StyleSheet.create({\n  overflowHidden: {\n    overflow: 'hidden',\n  },\n});\n\nexport default withInternalTheme(TouchableRipple);\n"],"mappings":";;;;;;AAAA;AACA;AAUA;AAEA;AAAmD;AAAA;AAAA;AAEnD,MAAMA,wBAAwB,GAAG,EAAE;AACnC,MAAMC,mBAAmB,GAAG,EAAE;AAc9B,MAAMC,eAAe,GAAG,QAUX;EAAA,IAVY;IACvBC,KAAK;IACLC,UAAU;IACVC,UAAU,GAAG,KAAK;IAClBC,QAAQ,EAAEC,YAAY;IACtBC,WAAW;IACXC,aAAa;IACbC,QAAQ;IACRC,KAAK;IACL,GAAGC;EACE,CAAC;EACN,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGC,KAAK,CAACC,QAAQ,CAAU,KAAK,CAAC;EAEtE,MAAMV,QAAQ,GAAGC,YAAY,IAAI,CAACK,IAAI,CAACK,OAAO;EAC9C,MAAM;IAAEC,qBAAqB;IAAEC;EAAwB,CAAC,GACtD,IAAAC,+BAAwB,EAAC;IACvBT,KAAK;IACLH,WAAW;IACXC;EACF,CAAC,CAAC;;EAEJ;EACA;EACA,MAAMY,aAAa,GACjBC,qBAAQ,CAACC,EAAE,KAAK,SAAS,IACzBD,qBAAQ,CAACE,OAAO,IAAIvB,mBAAmB,IACvCI,UAAU;EAEZ,MAAMoB,aAAa,GAAIC,CAAwB,IAAK;IAAA;IAClDZ,eAAe,CAAC,IAAI,CAAC;IACrB,mBAAAF,IAAI,CAACe,SAAS,oDAAd,qBAAAf,IAAI,EAAac,CAAC,CAAC;EACrB,CAAC;EAED,MAAME,cAAc,GAAIF,CAAwB,IAAK;IAAA;IACnDZ,eAAe,CAAC,KAAK,CAAC;IACtB,oBAAAF,IAAI,CAACiB,UAAU,qDAAf,sBAAAjB,IAAI,EAAcc,CAAC,CAAC;EACtB,CAAC;EAED,IAAIxB,eAAe,CAAC4B,SAAS,EAAE;IAC7B,oBACE,oBAAC,sBAAS,eACJlB,IAAI;MACR,QAAQ,EAAEN,QAAS;MACnB,KAAK,EAAE,CAACD,UAAU,IAAI0B,MAAM,CAACC,cAAc,EAAE7B,KAAK,CAAE;MACpD,cAAc,EACZC,UAAU,IAAI,IAAI,GACdA,UAAU,GACV;QACE6B,KAAK,EAAEf,qBAAqB;QAC5Bb,UAAU;QACV6B,UAAU,EAAEb;MACd;IACL,IAEAN,KAAK,CAACoB,QAAQ,CAACC,IAAI,CAAC1B,QAAQ,CAAC,CACpB;EAEhB;EAEA,oBACE,oBAAC,sBAAS,eACJE,IAAI;IACR,QAAQ,EAAEN,QAAS;IACnB,KAAK,EAAE,CACLD,UAAU,IAAI0B,MAAM,CAACC,cAAc,EACnCnB,YAAY,IAAI;MAAEwB,eAAe,EAAElB;IAAwB,CAAC,EAC5DhB,KAAK,CACL;IACF,SAAS,EAAEsB,aAAc;IACzB,UAAU,EAAEG;EAAe,IAE1Bb,KAAK,CAACoB,QAAQ,CAACC,IAAI,CAAC1B,QAAQ,CAAC,CACpB;AAEhB,CAAC;AAEDR,eAAe,CAAC4B,SAAS,GACvBR,qBAAQ,CAACC,EAAE,KAAK,SAAS,IAAID,qBAAQ,CAACE,OAAO,IAAIxB,wBAAwB;AAE3E,MAAM+B,MAAM,GAAGO,uBAAU,CAACC,MAAM,CAAC;EAC/BP,cAAc,EAAE;IACdQ,QAAQ,EAAE;EACZ;AACF,CAAC,CAAC;AAAC,eAEY,IAAAC,0BAAiB,EAACvC,eAAe,CAAC;AAAA"}