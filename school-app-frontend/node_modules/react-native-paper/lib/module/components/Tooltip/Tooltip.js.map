{"version":3,"names":["React","Dimensions","View","StyleSheet","useInternalTheme","addEventListener","Portal","Text","getTooltipPosition","Tooltip","children","enterTouchDelay","leaveTouchDelay","title","rest","theme","visible","setVisible","useState","measurement","setMeasurement","tooltip","measured","showTooltipTimer","useRef","hideTooltipTimer","childrenWrapperRef","useEffect","current","clearTimeout","subscription","remove","handleOnLayout","nativeEvent","layout","measure","_x","_y","width","height","pageX","pageY","handleTouchStart","setTimeout","handleTouchEnd","styles","backgroundColor","isV3","colors","onSurface","borderRadius","roundness","hidden","color","surface","cloneElement","ref","create","alignSelf","justifyContent","paddingHorizontal","maxHeight","opacity"],"sources":["Tooltip.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Dimensions, View, LayoutChangeEvent, StyleSheet } from 'react-native';\n\nimport { useInternalTheme } from '../../core/theming';\nimport { addEventListener } from '../../utils/addEventListener';\nimport Portal from '../Portal/Portal';\nimport Text from '../Typography/Text';\nimport { getTooltipPosition, Measurement } from './utils';\n\nexport type Props = {\n  /**\n   * Tooltip reference element. Needs to be able to hold a ref.\n   */\n  children: React.ReactElement;\n  /**\n   * The number of milliseconds a user must touch the element before showing the tooltip.\n   */\n  enterTouchDelay?: number;\n  /**\n   * The number of milliseconds after the user stops touching an element before hiding the tooltip.\n   */\n  leaveTouchDelay?: number;\n  /**\n   * Tooltip title\n   */\n  title: string;\n};\n\n/**\n * Tooltips display informative text when users hover over, focus on, or tap an element.\n *\n * Plain tooltips, when activated, display a text label identifying an element, such as a description of its function. Tooltips should include only short, descriptive text and avoid restating visible UI text.\n *\n * <div class=\"screenshots\">\n *   <figure>\n *     <img src=\"screenshots/TODO.png\" />\n *     <figcaption>TODO</figcaption>\n *   </figure>\n * </div>\n *\n * ## Usage\n * ```js\n * import * as React from 'react';\n * import { IconButton, Tooltip } from 'react-native-paper';\n *\n * const MyComponent = () => (\n *   <Tooltip title=\"Selected Camera\">\n *     <IconButton icon=\"camera\" selected size={24} onPress={() => {}} />\n *   </Tooltip>\n * );\n *\n * export default MyComponent;\n * ```\n */\nconst Tooltip = ({\n  children,\n  enterTouchDelay = 500,\n  leaveTouchDelay = 1500,\n  title,\n  ...rest\n}: Props) => {\n  const theme = useInternalTheme();\n  const [visible, setVisible] = React.useState(false);\n  const [measurement, setMeasurement] = React.useState({\n    children: {},\n    tooltip: {},\n    measured: false,\n  });\n  const showTooltipTimer = React.useRef<NodeJS.Timeout>();\n  const hideTooltipTimer = React.useRef<NodeJS.Timeout>();\n  const childrenWrapperRef = React.useRef() as React.MutableRefObject<View>;\n\n  React.useEffect(() => {\n    return () => {\n      if (showTooltipTimer.current) {\n        clearTimeout(showTooltipTimer.current);\n      }\n\n      if (hideTooltipTimer.current) {\n        clearTimeout(hideTooltipTimer.current);\n      }\n    };\n  }, []);\n\n  React.useEffect(() => {\n    const subscription = addEventListener(Dimensions, 'change', () =>\n      setVisible(false)\n    );\n\n    return () => subscription.remove();\n  }, []);\n\n  const handleOnLayout = ({ nativeEvent: { layout } }: LayoutChangeEvent) => {\n    childrenWrapperRef.current.measure(\n      (_x, _y, width, height, pageX, pageY) => {\n        setMeasurement({\n          children: { pageX, pageY, height, width },\n          tooltip: { ...layout },\n          measured: true,\n        });\n      }\n    );\n  };\n\n  const handleTouchStart = () => {\n    if (hideTooltipTimer.current) {\n      clearTimeout(hideTooltipTimer.current);\n    }\n\n    showTooltipTimer.current = setTimeout(\n      () => setVisible(true),\n      enterTouchDelay\n    ) as unknown as NodeJS.Timeout;\n  };\n\n  const handleTouchEnd = () => {\n    if (showTooltipTimer.current) {\n      clearTimeout(showTooltipTimer.current);\n    }\n\n    hideTooltipTimer.current = setTimeout(() => {\n      setVisible(false);\n      setMeasurement({ children: {}, tooltip: {}, measured: false });\n    }, leaveTouchDelay) as unknown as NodeJS.Timeout;\n  };\n\n  return (\n    <>\n      {visible && (\n        <Portal>\n          <View\n            onLayout={handleOnLayout}\n            style={[\n              styles.tooltip,\n              {\n                backgroundColor: theme.isV3\n                  ? theme.colors.onSurface\n                  : theme.colors.tooltip,\n                ...getTooltipPosition(measurement as Measurement),\n                borderRadius: theme.roundness,\n                ...(measurement.measured ? styles.visible : styles.hidden),\n              },\n            ]}\n            testID=\"tooltip-container\"\n          >\n            <Text\n              accessibilityLiveRegion=\"polite\"\n              numberOfLines={1}\n              selectable={false}\n              variant=\"labelLarge\"\n              style={{ color: theme.colors.surface }}\n            >\n              {title}\n            </Text>\n          </View>\n        </Portal>\n      )}\n      <View\n        onTouchStart={handleTouchStart}\n        onTouchEnd={handleTouchEnd}\n        onTouchCancel={handleTouchEnd}\n      >\n        {React.cloneElement(children, { ...rest, ref: childrenWrapperRef })}\n      </View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  tooltip: {\n    alignSelf: 'flex-start',\n    justifyContent: 'center',\n    paddingHorizontal: 16,\n    height: 32,\n    maxHeight: 32,\n  },\n  visible: {\n    opacity: 1,\n  },\n  hidden: {\n    opacity: 0,\n  },\n});\n\nexport default Tooltip;\n"],"mappings":"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"}